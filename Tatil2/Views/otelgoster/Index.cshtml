@model List<Tatil2.Models.Otel>

<h1>Eklenen Oteller</h1>


<form id="otelSearchForm">
    <div class="form-group">
        <label for="BaslangicTarihi">Giriş Tarihi</label>
        <input type="date" id="BaslangicTarihi" name="BaslangicTarihi" class="form-control" required />
    </div>

    <div class="form-group">
        <label for="BitisTarihi">Çıkış Tarihi</label>
        <input type="date" id="BitisTarihi" name="BitisTarihi" class="form-control" required />
    </div>

    <div class="form-group">
        <label for="KisiSayisi">Kişi Sayısı</label>
        <input type="number" id="KisiSayisi" name="KisiSayisi" class="form-control" min="1" />
    </div>

    <button type="button" id="araButton" class="btn btn-primary">Ara</button>
</form>

<hr />

@if (Model != null && Model.Any())
{
    @foreach (var otel in Model)
    {
        <div class="otel">
            <h3>@otel.Ad</h3>
            <img src="@otel.Poster" alt="Otel Resmi" class="img-fluid" />
            <p><strong>Konum:</strong> @otel.Konum</p>
            <p>@otel.Aciklama</p>
            <a href="@Url.Action("index", "Oteller", new { id = otel.Id })" class="btn btn-info">İncele</a>
            <hr />
        </div>
    }
}
else
{
    <p>Uygun otel bulunamadı.</p>
}

<script>
    document.addEventListener("DOMContentLoaded", function () {
       
        const today = new Date().toISOString().split('T')[0];
        document.getElementById("BaslangicTarihi").setAttribute("min", today);
        document.getElementById("BitisTarihi").setAttribute("min", today);

        document.getElementById("araButton").addEventListener("click", function () {
            const BaslangicTarihi = document.getElementById("BaslangicTarihi").value;
            const BitisTarihi = document.getElementById("BitisTarihi").value;
            const kisiSayisi = document.getElementById("KisiSayisi").value;

            const url = `@Url.Action("Index", "Oteller")?BaslangicTarihi=${BaslangicTarihi}&BitisTarihi=${BitisTarihi}&KisiSayisi=${kisiSayisi}`;
            window.location.href = url; 
        });
    });
</script>
